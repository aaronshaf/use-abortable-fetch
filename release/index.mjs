import{useState as n,useEffect as r,useLayoutEffect as t,useRef as o}from"react";export default function(e,a){void 0===a&&(a={});var u=n({data:null,loading:0,error:null,controller:null}),l=u[0],i=u[1],c=o(!1);return t(function(){return c.current=!0,function(){c.current=!1}},[]),r(function(){var n=new AbortController;return i(function(r){return{data:null,loading:r.loading+1,error:null,controller:n}}),function(n,r,t,o){var e=Object.assign({},r,{signal:t});fetch(n,e).then(function(n){return n.ok?Promise.resolve(n):Promise.reject({message:n.statusText,status:n.status})}).then(function(n){return n.json()}).then(function(n){o(function(r){return Object.assign({},r,{data:n,loading:r.loading-1})})}).catch(function(n){var r="AbortError"!==n.name?n:null;o(function(n){return Object.assign({},n,{error:r,loading:n.loading-1})})})}(e,a,n.signal,function(n){c.current&&i(n)}),function(){return n.abort()}},[e]),{data:l.data,loading:!!l.loading,error:l.error,abort:function(){return l.controller&&l.controller.abort()}}}
//# sourceMappingURL=index.mjs.map
