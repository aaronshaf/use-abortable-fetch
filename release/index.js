var n=require("react");module.exports=function(r,t){void 0===t&&(t={});var e=n.useState({data:null,loading:0,error:null,controller:null}),o=e[0],u=e[1],a=n.useRef(!1);return n.useLayoutEffect(function(){return a.current=!0,function(){a.current=!1}},[]),n.useEffect(function(){var n=new AbortController;return u(function(r){return{data:null,loading:r.loading+1,error:null,controller:n}}),function(n,r,t,e){var o=Object.assign({},r,{signal:t});fetch(n,o).then(function(n){return n.ok?Promise.resolve(n):Promise.reject({message:n.statusText,status:n.status})}).then(function(n){return n.json()}).then(function(n){e(function(r){return Object.assign({},r,{data:n,loading:r.loading-1})})}).catch(function(n){var r="AbortError"!==n.name?n:null;e(function(n){return Object.assign({},n,{error:r,loading:n.loading-1})})})}(r,t,n.signal,function(n){a.current&&u(n)}),function(){return n.abort()}},[r]),{data:o.data,loading:!!o.loading,error:o.error,abort:function(){return o.controller&&o.controller.abort()}}};
//# sourceMappingURL=index.js.map
