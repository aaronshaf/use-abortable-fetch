!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):n.useAbortableFetch=t(n.react)}(this,function(n){return function(t,r){void 0===r&&(r={});var e=n.useState({data:null,loading:0,error:null,controller:null}),o=e[0],u=e[1],a=n.useRef(!1);return n.useLayoutEffect(function(){return a.current=!0,function(){a.current=!1}},[]),n.useEffect(function(){var n=new AbortController;return t&&(u(function(t){return{data:null,loading:t.loading+1,error:null,controller:n}}),function(n,t,r,e){var o=Object.assign({},t,{signal:r});fetch(n,o).then(function(n){return n.ok?Promise.resolve(n):Promise.reject({message:n.statusText,status:n.status})}).then(function(n){return n.json()}).then(function(n){e(function(t){return Object.assign({},t,{data:n,loading:t.loading-1})})}).catch(function(n){var t="AbortError"!==n.name?n:null;e(function(n){return Object.assign({},n,{error:t,loading:n.loading-1})})})}(t,r,n.signal,function(n){a.current&&u(n)})),function(){return n.abort()}},[t]),{data:o.data,loading:!!o.loading,error:o.error,abort:function(){return o.controller&&o.controller.abort()}}}});
//# sourceMappingURL=index.umd.js.map
